{"version":3,"sources":["webpack:///./client/src/components/commission/commission-page.tsx","webpack:///./client/src/components/commission/commission-switch.tsx"],"names":[],"mappings":"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","file":"26.index_bundle.js","sourcesContent":["'use strict';\n\nimport * as React from 'react';\nimport RichTextEditor from 'react-rte';\nimport * as moment from 'moment';\nimport { ICommissionsToggle, ICommissionsModel } from '../../../../server/src/routes/api/commissions/commissions.model';\nimport { IUserContext, userConsumer } from '../user/user-provider';\n\nexport interface CommissionPageProps {\n\tuser: IUserContext\n}\n\nexport interface CommissionPageState extends ICommissionsToggle {\n\trequired: boolean;\n\tdetails: any;\n\t_commissionRequestId: string;\n}\n\nclass CommissionPage extends React.Component<CommissionPageProps, CommissionPageState> {\n    constructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\taccepting: false,\n\t\t\tlimit: 0,\n\t\t\tstart_date: new Date(),\n\t\t\tend_date: new Date(),\n\t\t\tcomment: '',\n\t\t\trequired: false,\n\t\t\tdetails: RichTextEditor.createEmptyValue(),\n\t\t\t_commissionRequestId: null,\n\t\t}\n\t\tthis.hitKey = this.hitKey.bind(this);\n\t\tthis.submitCommissionRequest = this.submitCommissionRequest.bind(this);\n\t\tthis.onRichTextChange = this.onRichTextChange.bind(this);\n\t}\n\n\thitKey(event) {\n\t\tif (event.key == 'Enter') {\n\t\t\tthis.submitCommissionRequest(event);\n\t\t}\n\t}\n\n\tsubmitCommissionRequest(event) {\n\t\tevent.preventDefault();\n\t\tconst requestor = this.requestorRef.current.value;\n\t\tconst email = this.emailRef.current.value;\n\t\tconst { details, } = this.state;\n\n\t\tif (!requestor || !email || !details) {\n\t\t\tthis.setState(() => {\n\t\t\t\treturn {required: true};\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tconst commissionRequest = {\n\t\t\trequestor: requestor,\n\t\t\temail: email,\n\t\t\tdetails: details.toString('html'),\n\t\t}\n\n\t\tconst request = new Request('/api/commissions', {\n            method: 'POST',\n            credentials: 'same-origin',\n            headers: {\n                'Content-Type': 'application/json',\n\t\t\t\t'Accept': 'application/json',\n\t\t\t\tbody: JSON.stringify(commissionRequest)\n            },\n\t\t});\n\n\t\tthis.setState(() => {\n\t\t\treturn {required: false};\n\t\t});\n\n\t\tfetch(request)\n        .then((response) => {\n            if (response.status < 200 || response.status >= 300) {\n                const error = new Error(response.statusText);\n                error.message = String(response);\n                throw error;\n            }\n            return response.json();\n        })\n\t\t.then((toggle) => {\n\t\t\tthis.setState(() => {\n\t\t\t\treturn {_commissionRequestId: toggle._id};\n\t\t\t});\n\t\t})\n\t\t.catch((error) => {\n\t\t\tthis.setState(() => {\n\t\t\t\treturn {required: true};\n\t\t\t});\n\t\t\tconsole.error(error);\n\t\t})\n\n\t}\n\n\tonRichTextChange = (value) => {\n\t\tthis.setState(() => {\n\t\t\treturn {details: value};\n\t\t});\n\t}\n\n\trequestorRef: React.RefObject<HTMLInputElement> = React.createRef();\n\temailRef: React.RefObject<HTMLInputElement> = React.createRef();\n\n\tcomponentDidMount() {\n\t\tconst request = new Request('/api/commissions/toggle', {\n            method: 'GET',\n            credentials: 'same-origin',\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n            },\n\t\t});\n\t\tfetch(request)\n        .then((response) => {\n            if (response.status < 200 || response.status >= 300) {\n                const error = new Error(response.statusText);\n                error.message = String(response);\n                throw error;\n            }\n            return response.json();\n        })\n\t\t.then((toggle: ICommissionsToggle) => {\n\t\t\tthis.setState(() => {\n\t\t\t\treturn {\n\t\t\t\t\taccepting: toggle.accepting,\n\t\t\t\t\tlimit: toggle.limit,\n\t\t\t\t\tstart_date: toggle.start_date,\n\t\t\t\t\tend_date: toggle.end_date,\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.error(error);\n\t\t})\n\t}\n\n\trender() {\n\t\tconst { requestorRef, emailRef, hitKey, submitCommissionRequest, onRichTextChange } = this;\n\t\tconst { admin } = this.props.user;\n\t\tconst { accepting, limit, start_date, end_date, comment, required, details, _commissionRequestId } = this.state;\n\n\t\tlet displayMessage: JSX.Element = (\n\t\t\t<div>\n\t\t\t\t<p>Not Accepting Commissions at this time</p>\n\t\t\t</div>\n\t\t);\n\t\tlet acceptingRequests = false;\n\n\t\tif (accepting) {\n\t\t\tdisplayMessage = (\n\t\t\t\t<div>\n\t\t\t\t\t<p>Now Accepting Commission Requests</p>\n\t\t\t\t</div>\n\t\t\t);\n\t\t\tacceptingRequests = true;\n\t\t}\n\t\tif (limit) {\n\t\t\tdisplayMessage = (\n\t\t\t\t<div>\n\t\t\t\t\t<p>Now Accepting Commission Requests</p>\n\t\t\t\t\t<p>Accepting {limit} more Commissions.</p>\n\t\t\t\t</div>\n\t\t\t);\n\t\t\tacceptingRequests = true;\n\t\t}\n\t\tlet start = moment(start_date).format(\"MMM Do YYYY [at] h:mm a \");\n\t\tlet end = moment(end_date).format(\"MMM Do YYYY [at] h:mm a \");\n\t\tif (end_date > new Date()) {\n\t\t\tif (start_date < new Date()) {\n\t\t\t\tdisplayMessage = (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p>Now accepting commission requests</p>\n\t\t\t\t\t\t<p>Commissions will be accepted until {end}.</p>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\tacceptingRequests = true;\n\t\t\t} else {\n\t\t\t\tdisplayMessage = (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p>Not accepting commissions at this time.</p>\n\t\t\t\t\t\t<p>Will be accepting commissions on {start} until {end}.</p>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n        // requestor?: string;\n        // email?: number;\n        // details?: string;\n\n\t\tconst convertedComment = RichTextEditor.createValueFromString(comment, 'html');\n\n\t\tlet commissionRequest: JSX.Element | '';\n\n\t\tcommissionRequest = acceptingRequests ? (\n\t\t\t<div>\n\t\t\t\t<h3>Commission Request</h3>\n\t\t\t\t<label>Requestor{required ? (<span className=\"errortext\" >*</span>) : ''}</label>\n\t\t\t\t<br/>\n\t\t\t\t<input type='text' onKeyPress={hitKey} placeholder=\"Joe Smith\" ref={requestorRef} />\n\t\t\t\t<br/>\n\t\t\t\t<label>Email{required ? (<span className=\"errortext\" >*</span>) : ''}</label>\n\t\t\t\t<br/>\n\t\t\t\t<input type='text' onKeyPress={hitKey} placeholder=\"Joe Smith\" ref={emailRef} />\n\t\t\t\t<br/>\n\t\t\t\t<label>Details</label>\n\t\t\t\t<br/>\n\t\t\t\t<RichTextEditor value={details} onChange={onRichTextChange} />\n\t\t\t\t<br/>\n\t\t\t\t<input type='submit' onClick={submitCommissionRequest} value='REQUEST' />\n\t\t\t</div>\n\t\t) : '';\n\n\t\tif (_commissionRequestId) {\n\t\t\tcommissionRequest = (\n\t\t\t\t<div>\n\t\t\t\t\t<p>Commission Request Submited</p>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"commission-page-wrapper\">\n\t\t\t\t{displayMessage}\n\t\t\t\t{ comment != '<p><br></p>' ? <RichTextEditor value={convertedComment} readOnly={true} /> : ''}\n\t\t\t\t{commissionRequest}\n\t\t\t</div>\n\t\t);\t\t\t\n\t}\n};\n\nexport default userConsumer(CommissionPage);","'use strict';\n\nimport * as React from 'react'\nimport { Route, Switch } from 'react-router';\nimport { NavLink } from \"react-router-dom\";\nimport CommissionPage from './commission-page';\nimport NoMatch from '../no-match';\n\nclass CommissionSwitch extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"commission-switch-wrapper\">\n\t\t\t\t<div className=\"container\">\n\t\t\t\t\t<NavLink exact to={'/commission'} activeClassName=\"selected\" ><h2>Commission</h2></NavLink>\n                    <Switch>\n\t\t\t\t\t\t<Route exact path=\"/commission\" component={CommissionPage} />\n                        <Route path=\"/commission/commission\" component={NoMatch} />\n                        <Route component={NoMatch}/>\n                    </Switch>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\t\t\t\n\t}\n};\n\nexport default CommissionSwitch;"],"sourceRoot":""}