{"version":3,"sources":["webpack:///./client/src/components/user/resetpassword.tsx"],"names":[],"mappings":"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","file":"33.index_bundle.js","sourcesContent":["'use strict';\r\n\r\nimport * as React from 'react';\r\nimport { Redirect, NavLink, match } from \"react-router-dom\";\r\nimport { IUserContext, userConsumer } from './user-provider';\r\n\r\nexport interface ResetPasswordProps {\r\n\tuser: IUserContext;\r\n\tmatch: match<{\r\n\t\tuserId: string;\r\n\t\treset_code: string;\r\n\t}>;\r\n}\r\n\r\nexport interface ResetPasswordState {\r\n\tredirect: boolean;\r\n\tpasswordMismtach: boolean;\r\n\tpasswordBad: boolean;\r\n\tvaildCode: boolean;\r\n}\r\n\r\nexport interface ResetPasswordMethods {\r\n\thitKey: (event: UIEvent) => void;\r\n\tresetPassword: (event: UIEvent) => void;\r\n\tresetPasswordResult: (error: boolean) => void;\r\n\tredirect: (event: UIEvent) => void;\r\n}\r\n\r\n\r\nclass ResetPassword extends React.Component<ResetPasswordProps, ResetPasswordState> implements ResetPasswordMethods {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n        \tredirect: false,\r\n        \tpasswordMismtach: false,\r\n\t\t\tpasswordBad: false,\r\n\t\t\tvaildCode: true,\r\n        };\r\n\r\n\t\tthis.hitKey = this.hitKey.bind(this);\r\n\t\tthis.resetPassword = this.resetPassword.bind(this);\r\n\t\tthis.resetPasswordResult = this.resetPasswordResult.bind(this);\r\n\t\tthis.redirect = this.redirect.bind(this);\r\n    }\r\n\r\n\thitKey(event) {\r\n\t\tif (event.key == 'Enter') {\r\n            this.resetPassword(event);\r\n        }\r\n\t}\r\n\r\n    resetPassword(event) {\r\n\t\tevent.preventDefault();\r\n\t\tlet newpassword = this.newpasswordRef.current.value;\r\n\t\tlet confirmpassword = this.confirmpasswordRef.current.value;\r\n\r\n\t\tif (newpassword == confirmpassword) {\r\n\t\t\tthis.setState(() => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tpasswordBad: false,\r\n\t\t\t\t\tpasswordMismtach: false,\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t\tthis.props.user.resetPassword(newpassword, this.props.match.params.userId, this.props.match.params.reset_code, this.resetPasswordResult);\r\n\t\t} else {\r\n\t\t\tthis.newpasswordRef.current.value = '';\r\n\t\t\tthis.confirmpasswordRef.current.value = '';\r\n\r\n\t\t\tthis.setState(() => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tpasswordMismtach: true,\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t}\r\n    }\r\n\r\n    resetPasswordResult(error) {\r\n    \tif (error) {\r\n\t\t\tthis.newpasswordRef.current.value = '';\r\n\t\t\tthis.confirmpasswordRef.current.value = '';\r\n\t\t\tthis.setState(() => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tpasswordMismtach: true,\r\n\t\t\t\t\tpasswordBad: true,\r\n\t\t\t\t};\r\n\t\t\t});\r\n    \t} else {\r\n\t\t\tthis.redirect();\r\n    \t} \r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst { userId, reset_code } = this.props.match.params;\r\n\t\tthis.props.user.checkResetCode(userId, reset_code, (vaild) => {\r\n\t\t\tthis.setState(() => {\r\n\t\t\t\treturn {vaildCode: vaild};\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tredirect() {\r\n\t\tthis.setState(() => {\r\n\t\t\treturn {\r\n\t\t\t\tredirect: true,\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\tnewpasswordRef: React.RefObject<HTMLInputElement> = React.createRef();\r\n\tconfirmpasswordRef: React.RefObject<HTMLInputElement> = React.createRef();\r\n\r\n\trender() {\r\n\t\tconst { hitKey, resetPassword, newpasswordRef, confirmpasswordRef } = this;\r\n\t\tconst { redirect, passwordBad, passwordMismtach, vaildCode} = this.state;\r\n\t\tconst { userId, reset_code } = this.props.match.params;\r\n\t\tif (redirect) {\r\n\t\t\treturn (<Redirect to='/profile'/>);\r\n\t\t}\r\n\r\n\r\n\t\tif (!userId || !reset_code || !vaildCode) {\r\n\t\t\treturn (<Redirect to='/forgotpassword'/>);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"profile-wrapper container\" >\r\n\t\t\t\t<h2>Reset Password</h2>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<label>New Password{passwordMismtach ? (<span className=\"errortext\" >*</span>) : ''}</label>\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<input type='password' onKeyPress={hitKey} placeholder=\"New Password\" ref={newpasswordRef} />\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<label>Confrim New Password{passwordMismtach ? (<span className=\"errortext\" >* Must match new Password</span>) : ''}</label>\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<input type='password' onKeyPress={hitKey} placeholder=\"New Password\" ref={confirmpasswordRef} />\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<input type='submit' onClick={resetPassword} value='SAVE' />\r\n\t\t\t\t</div>\t\r\n\t\t\t</div>\r\n\t\t);\t\t\t\r\n\t}\r\n};\r\n\r\nexport default userConsumer(ResetPassword);"],"sourceRoot":""}